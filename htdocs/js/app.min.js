function setCookie(e,t,a){var n,s="";a&&((n=new Date).setTime(n.getTime()+24*a*60*60*1e3),s="; expires="+n.toUTCString()),document.cookie=e+"="+t+s+"; path=/"}$(document).ready(function(){console.log("Assign Faculty js loaded"),$("#studentSections").select2({placeholder:"Student Sections",allowClear:!0,width:"100%"})}),$(document).ready(function(){$("#classForm").on("submit",function(e){e.preventDefault();let t={faculty_id:$("#facultyId").val(),subject_code:$("#subjectCode").val(),batch:$("#batch").val(),department:$("#department").val(),semester:$("#semester").val(),section:$("#section").val(),student_sections:$("#studentSections").val(),year:$("#year").val()};console.log("Form Data:",t);e=new Dialog("Assigning Faculty","Are you sure you want to assign faculty to the selected sections? "+{formData:t});e.setButtons([{name:"Assign Faculty",class:"btn-success",onClick:function(e){$.ajax({url:"/api/app/create/assignfaculty",type:"POST",data:t,success:function(e){console.log("response",e.message),new Toast("Status","now",e.message).show(),$("#classForm").trigger("reset")},error:function(e,t,a){console.error("Error assigning faculty:",a),new Toast("Error","now","Error assigning faculty").show()}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-danger",onClick:function(e){$(e.data.modal).modal("hide")}}]),e.show()})}),$("#create-subjects").on("click",function(){var e,a=new FormData,n=$("#subjectFile")[0].files[0];n?(e=n.name.split(".").pop().toLowerCase(),-1===[".xls",".xlsx"].indexOf("."+e)?alert("Please upload a valid Excel file (.xls or .xlsx)"):((e=new Dialog("Creating Subjects","Are you sure you want to create new subjects? ")).setButtons([{name:"Create Subjects",class:"btn-primary",onClick:function(e){a.append("subjects_file",n);var t=new Toast("New","now","Creating subjects");t.show(),$.ajax({url:"/api/app/create/subjects",type:"POST",data:a,processData:!1,contentType:!1,success:function(e){console.log("Subjects created successfully:",e),(t=new Toast("Success","now",e.successCount+" Subjects created successfully")).show()},error:function(e){console.log("Error creating subjects:",e),alert("An error occurred while creating subjects. Please try again.")}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-secondary",onClick:function(e){console.log("Subject creation cancelled."),$(e.data.modal).modal("hide")}}]),e.show())):alert("Please select a file to upload.")}),document.addEventListener("DOMContentLoaded",function(){console.log("create test js loaded [new]");let n=1;document.querySelector("#subjectsContainer").addEventListener("click",function(e){var t,a;e.target.classList.contains("addSubjectBtn")?(e.preventDefault(),t=document.querySelector("#subjectTemplate"),(a=document.createElement("div")).className="input-group mb-2",a.innerHTML=`
                <select class="form-select" name="subjects[${n}][code]" required>
                    ${t.innerHTML}
                </select>
                <input type="date" class="form-control" name="subjects[${n}][date]" required>
                <button type="button" class="btn btn-danger removeSubjectBtn">-</button>
            `,document.querySelector("#subjectsContainer").appendChild(a),n++):e.target.classList.contains("removeSubjectBtn")&&e.target.closest(".input-group").remove()})}),$(document).ready(function(){console.log("create test js loaded [form]"),$("#createTestForm").on("submit",function(e){e.preventDefault();let n={testname:$("#testname").val(),month:$("#month").val(),batch:$("#batch").val(),semester:$("#semester").val(),year:$("#year").val(),department:$("#department").val(),subjects:[],duration:$("#duration").val(),totalmarks:$("#totalmarks").val(),passmarks:$("#passmarks").val(),instructions:$("#instructions").val()};$("#subjectsContainer .input-group").each(function(e){var t=$(this).find('select[name^="subjects"]').val(),a=$(this).find('input[type="date"]').val();t&&a&&n.subjects.push({subject_code:t,date:a})}),console.log(n);e=new Dialog("Creating Test","Are you sure you want to create this test? "+{formData:n});e.setButtons([{name:"Create Test",class:"btn-success",onClick:function(e){$.ajax({url:"/api/app/create/createtest",type:"POST",data:n,success:function(e){console.log("response",e.message),new Toast("Status","now",e.message).show(),$("#createTestForm").trigger("reset")},error:function(e,t,a){console.error("Error creating test:",a),new Toast("Error","now","Error creating test").show()}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-danger",onClick:function(e){$(e.data.modal).modal("hide")}}]),e.show()})}),$("#create-users").on("click",function(){var a=new FormData,n=$('input[name="userType"]:checked').val(),s=$('input[name="role"]:checked').val(),o=$("#formFile")[0].files[0];if("multiple"===n){if(!o)return void alert("Please select a file to upload.");var e=o.name.split(".").pop().toLowerCase();if(-1===[".xls",".xlsx"].indexOf("."+e))return void alert("Please upload a valid Excel file (.xls or .xlsx)")}e=new Dialog("Creating User Profiles","Are you sure you want to create new users");e.setButtons([{name:"Create User",class:"btn-primary",onClick:function(e){a.append("userType",n),a.append("role",s),a.append("users_file",o);var t=new Toast("New","now","Creating profiles");t.show(),$.ajax({url:"/api/app/create/users",type:"POST",data:a,processData:!1,contentType:!1,success:function(e){console.log("User created successfully:",e),(t=new Toast("Success","now",e.successCount+" Users created successfully")).show()},error:function(e){console.log("Error creating user:",e),alert("An error occurred while creating the user. Please try again.")}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-secondary",onClick:function(e){console.log("User creation cancelled."),$(e.data.modal).modal("hide")}}]),e.show()}),(()=>{var e=document.getElementById("myChart");new Chart(e,{type:"line",data:{labels:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],datasets:[{data:[15339,21345,18483,24003,23489,24092,12034],lineTension:0,backgroundColor:"transparent",borderColor:"#007bff",borderWidth:4,pointBackgroundColor:"#007bff"}]},options:{plugins:{legend:{display:!1},tooltip:{boxPadding:3}}}})})(),$(document).ready(function(){console.log("enrollmennt js loaded"),$("#subjects").select2({placeholder:"Select subjects",allowClear:!0,width:"100%"})}),$("#fetch-students-btn").on("click",function(e){e.preventDefault(),console.log("fetch-students-btn clicked");var t=new FormData($("#subject-selection-form")[0]);(t.getAll("subjects[]").length?((e=new Dialog("Fetching Students","Are you sure you want to fetch students for the selected subjects?")).setButtons([{name:"Fetch Students",class:"btn-primary",onClick:function(e){new Toast("Fetching","now","Fetching students").show(),$.ajax({url:"/api/app/template/enrollsubstud",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){console.log("Students fetched successfully:",e),new Toast("Success","now","Students fetched successfully").show(),$("#subjects-list-container").empty(),"string"==typeof e?$("#subjects-list-container").append(e):e&&e.html?$("#subjects-list-container").append(e.html):console.error("Unexpected response format:",e),$("#subjects-list-container").show()},error:function(e){(errortoast=new Toast("Failed","now","Students not found")).show(),console.error("Error fetching students:",e)}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-secondary",onClick:function(e){new Toast("Cancelled","now","Fetching students cancelled").show(),$(e.target).closest(".modal").modal("hide")}}]),e):new Toast("Error","now","Please select subjects")).show()}),$(document).ready(function(){$("#signOutBtn").on("click",function(e){e.preventDefault();e=new Dialog("Sign out Confirmation","Are you sure you want to sign out?");e.setButtons([{name:"Sign Out",class:"btn-danger",onClick:function(e){$.ajax({url:"/api/auth/logout",type:"POST",success:function(e){window.location.href="/"},error:function(e){alert("Error signing out. Please try again.")}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-success",onClick:function(e){console.log("User canceled sign out."),$(e.data.modal).modal("hide")}}]),e.show()})}),$("#generateExcel-btn").click(function(){var e=new FormData,a=$("#batch").val(),n=$("#semester").val(),s=$("#section").val(),o=$("#subject_code").val(),c=$("#department").val(),r=$("#test_name").val();e.append("batch",a),e.append("semester",n),e.append("section",s),e.append("subject_code",o),e.append("department",c),e.append("test_name",r),console.log(a,n,s,o,c,r),$.ajax({url:"/generate_report",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{responseType:"blob"},success:function(e){var e=window.URL.createObjectURL(e),t=document.createElement("a");t.href=e,t.download="report_"+a+"_"+n+"_"+s+"_"+o+"_"+c+"_"+r+".xlsx",t.click(),window.URL.revokeObjectURL(e)},error:function(e,t,a){console.error("Error:",a)}})}),document.getElementById("student-select").addEventListener("change",function(){var e=this.options[this.selectedIndex],t=e.dataset.regno,a=e.dataset.name,e=e.dataset.marks;document.getElementById("reg-no").value=t,document.getElementById("student-name").value=a,document.getElementById("current-marks").value=e,document.getElementById("update-form").classList.remove("d-none")}),document.getElementById("reset-btn").addEventListener("click",function(){document.getElementById("student-select").value="",document.getElementById("update-form").classList.add("d-none")}),document.getElementById("update-btn").addEventListener("click",function(){var e=document.getElementById("reg-no").value,a=document.getElementById("updated-marks").value,n=document.getElementById("update-form"),s=n.dataset.batch,o=n.dataset.semester,c=n.dataset.subject_code,r=n.dataset.testname,l=n.dataset.section,n=n.dataset.department;if(console.log(e,a,s,o,c,r,l,n),a.trim()){(updatingToast=new Toast("Updating","now","Updating marks")).show();let t=new FormData;t.append("reg_no",e),t.append("new_mark",a),t.append("batch",s),t.append("semester",o),t.append("subject_code",c),t.append("testname",r),t.append("section",l),t.append("department",n);e=new Dialog("Update Marks","Are you sure to update mark as "+a+"?");e.setButtons([{name:"Update Mark",class:"btn-success",onClick:function(e){$.ajax({url:"/api/app/update/updatemark",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){console.log("Marks updated successfully:",e),new Toast("Success","now","Marks updated successfully").show(),$("#update-form").find("input").val(""),$("#student-select").val("").trigger("change"),$("#update-form").addClass("d-none")},error:function(e){console.error("Error updating marks:",e),(errortoast=new Toast("Failed","now","Marks not updated")).show()}}),$(e.data.modal).modal("hide")}},{name:"Cancel",class:"btn-secondary",onClick:function(e){new Toast("Cancelled","now","Update Marks Cancelled").show(),$(e.data.modal).modal("hide")}}]),e.show()}else alert("Please enter new marks.")}),$("#back-btn").on("click",function(){window.history.back()}),$("#edit-back-btn").on("click",function(){window.history.back()}),console.log("sidebar.js loaded"),Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(e=>{new bootstrap.Tooltip(e),console.log("tooltipTriggerEl:",e)});
//# sourceMappingURL=app.min.js.map